pipeline {
    agent any
    stages {
        stage('Checkout') {
		    steps {
			    git credentialsId: '230790d6-1a2c-45a5-9da6-74b20d0c7b21', url: 'https://github.com/psp2003/student-exam2'
            }
        }
        stage('Launch tests') {
            steps {
                sh label: '', script: '''python3 -m venv venv
		. venv/bin/activate
		pip install -e .
		export FLASK_APP=js_example
		pip install -e \'.[test]\'
		coverage run -m pytest
		coverage report'''
            }
		}
        stage('Build Dockerimage') {
            steps {
                sh label: '', script: 'docker run hello-world'
            }
        }
        /*stage('Auth to hub.docker.com') {
            steps {
                //some_commands
            }
        }
        stage('Pysh docker image') {
            steps {
                //some_commands
            }
        }*/
    }
}
